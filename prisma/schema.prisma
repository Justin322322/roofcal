// Prisma schema for MySQL
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id                 String             @id @default(cuid())
  email              String             @unique
  passwordHash       String
  firstName          String
  lastName           String
  role               String             @default("client")
  emailVerified      DateTime?          @map("email_verified")
  createdAt          DateTime           @default(now()) @map("created_at")
  updatedAt          DateTime           @updatedAt @map("updated_at")
  verificationCodes  VerificationCode[]

  @@index([email])
}

model VerificationCode {
  id        String   @id @default(cuid())
  code      String   @db.VarChar(6)
  email     String
  type      String   @default("email_verification") // email_verification, password_reset
  expiresAt DateTime
  used      Boolean  @default(false)
  createdAt DateTime @default(now()) @map("created_at")
  user      User     @relation(fields: [email], references: [email], onDelete: Cascade)

  @@index([email])
  @@index([code])
  @@index([expiresAt])
}
